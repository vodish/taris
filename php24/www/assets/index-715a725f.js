var $t=Object.defineProperty;var wt=(t,e,n)=>e in t?$t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X=(t,e,n)=>(wt(t,typeof e!="symbol"?e+"":e,n),n);const we=Object.freeze(Object.defineProperty({__proto__:null,get accessText(){return Pe},get api(){return se},get apierr(){return ke},get get(){return mt},get href(){return pe},get isProject(){return je},get lineHtml(){return $e},get lineText(){return Me},get logList(){return kt},get packBc(){return De},get packMenu(){return _e},get packStart(){return x},get packTitle(){return Be},get packTree(){return Ie},get parse(){return He},get pref(){return B},get treeText(){return Ne},get url(){return ce},get userList(){return ge}},Symbol.toStringTag,{value:"Module"}));(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const f of i)if(f.type==="childList")for(const r of f.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const f={};return i.integrity&&(f.integrity=i.integrity),i.referrerPolicy&&(f.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?f.credentials="include":i.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(i){if(i.ep)return;i.ep=!0;const f=n(i);fetch(i.href,f)}})();function M(){}function ot(t){return t()}function ze(){return Object.create(null)}function ne(t){t.forEach(ot)}function at(t){return typeof t=="function"}function F(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function yt(t){return Object.keys(t).length===0}function dt(t,...e){if(t==null){for(const l of e)l(void 0);return M}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function mt(t){let e;return dt(t,n=>e=n)(),e}function N(t,e,n){t.$$.on_destroy.push(dt(e,n))}const Tt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function _(t,e){t.appendChild(e)}function k(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function ve(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function Lt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function H(t){return document.createTextNode(t)}function T(){return H(" ")}function me(){return H("")}function C(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function pt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Et(t){return Array.from(t.childNodes)}function U(t,e){e=""+e,t.data!==e&&(t.data=e)}function be(t,e){t.value=e??""}function Ve(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}class St{constructor(e=!1){X(this,"is_svg",!1);X(this,"e");X(this,"n");X(this,"t");X(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,l=null){this.e||(this.is_svg?this.e=Lt(n.nodeName):this.e=g(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)k(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(b)}}let ae;function oe(t){ae=t}function _t(){if(!ae)throw new Error("Function called outside component initialization");return ae}function Oe(t){_t().$$.on_mount.push(t)}function Nt(t){_t().$$.on_destroy.push(t)}const re=[],de=[];let ue=[];const Te=[],Mt=Promise.resolve();let Le=!1;function Pt(){Le||(Le=!0,Mt.then(ht))}function Ee(t){ue.push(t)}function Ae(t){Te.push(t)}const ye=new Set;let le=0;function ht(){if(le!==0)return;const t=ae;do{try{for(;le<re.length;){const e=re[le];le++,oe(e),Ot(e.$$)}}catch(e){throw re.length=0,le=0,e}for(oe(null),re.length=0,le=0;de.length;)de.pop()();for(let e=0;e<ue.length;e+=1){const n=ue[e];ye.has(n)||(ye.add(n),n())}ue.length=0}while(re.length);for(;Te.length;)Te.pop()();Le=!1,ye.clear(),oe(t)}function Ot(t){if(t.fragment!==null){t.update(),ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ee)}}function At(t){const e=[],n=[];ue.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ue=e}const he=new Set;let te;function Y(){te={r:0,c:[],p:te}}function Q(){te.r||ne(te.c),te=te.p}function $(t,e){t&&t.i&&(he.delete(t),t.i(e))}function L(t,e,n,l){if(t&&t.o){if(he.has(t))return;he.add(t),te.c.push(()=>{he.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Z(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ce(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function j(t){t&&t.c()}function O(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),Ee(()=>{const f=t.$$.on_mount.map(ot).filter(at);t.$$.on_destroy?t.$$.on_destroy.push(...f):ne(f),t.$$.on_mount=[]}),i.forEach(Ee)}function A(t,e){const n=t.$$;n.fragment!==null&&(At(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ct(t,e){t.$$.dirty[0]===-1&&(re.push(t),Pt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(t,e,n,l,i,f,r,u=[-1]){const s=ae;oe(t);const c=t.$$={fragment:null,ctx:[],props:f,update:M,not_equal:i,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:ze(),dirty:u,skip_bound:!1,root:e.target||s.$$.root};r&&r(c.root);let o=!1;if(c.ctx=n?n(t,e.props||{},(h,d,...v)=>{const p=v.length?v[0]:d;return c.ctx&&i(c.ctx[h],c.ctx[h]=p)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](p),o&&Ct(t,h)),d}):[],c.update(),o=!0,ne(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const h=Et(e.target);c.fragment&&c.fragment.l(h),h.forEach(b)}else c.fragment&&c.fragment.c();e.intro&&$(t.$$.fragment),O(t,e.target,e.anchor),ht()}oe(s)}class q{constructor(){X(this,"$$");X(this,"$$set")}$destroy(){A(this,1),this.$destroy=M}$on(e,n){if(!at(n))return M;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!yt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ht="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ht);const ie=[];function D(t,e=M){let n;const l=new Set;function i(u){if(F(t,u)&&(t=u,n)){const s=!ie.length;for(const c of l)c[1](),ie.push(c,t);if(s){for(let c=0;c<ie.length;c+=2)ie[c][0](ie[c+1]);ie.length=0}}}function f(u){i(u(t))}function r(u,s=M){const c=[u,s];return l.add(c),l.size===1&&(n=e(i,f)||M),u(t),()=>{l.delete(c),l.size===0&&n&&(n(),n=null)}}return{set:i,update:f,subscribe:r}}let Se=document.getElementById("rtoken"),qe=JSON.parse(Se.innerText);Se.parentNode.removeChild(Se);function gt(){let t=He(window.location.pathname);ce.set(t),t.level[0]&&t.level[0]!=mt(x)&&B(window.location.pathname)}function pe(t){typeof t=="object"&&t.srcElement.tagName=="A"&&(t.preventDefault(),t=t.srcElement.pathname),window.location.pathname!=t&&(window.history.pushState({},"",t),ce.set(He(t)))}function B(t,e){typeof t=="object"&&t.srcElement.tagName=="A"&&(t.preventDefault(),t=t.srcElement.pathname);let n={href:t};for(let l in e||{})n[l]=e[l];se(n,l=>{for(let i in l)we[i]&&we[i].set&&we[i].set(l[i]);pe(l.href||t)})}function He(t){let e=t=="/"?[]:t.substring(1).split("/"),n=[];return e.map((l,i)=>n[i]=`${i?n[i-1]:""}/${l}`),{path:t,level:e,dir:n}}function se(t,e){t.rtoken=qe;let n=new FormData;bt(n,t);let l=new XMLHttpRequest;l.open("POST","/api"),l.send(n),l.onload=()=>{let i={};try{i=JSON.parse(l.response)}catch{ke.set(l.response)}i.rtoken&&(qe=i.rtoken,ke.set("")),e(i)}}function bt(t,e,n){e&&typeof e=="object"&&!(e instanceof Date)&&!(e instanceof File)&&!(e instanceof Blob)?Object.keys(e).forEach(l=>bt(t,e[l],n?`${n}[${l}]`:l)):t.append(n,e??"")}let ce=D(),ke=D(""),ge=D(!1),x=D(!1),je=D(!1),De=D([]),Ie=D([]),_e=D({name:""}),Be=D(""),Ne=D(""),$e=D(""),Me=D(""),Pe=D(""),kt=D([]);gt();window.addEventListener("popstate",gt);const{document:jt}=Tt;function Ge(t,e,n){const l=t.slice();return l[12]=e[n],l}function Dt(t){let e,n,l,i,f,r,u,s,c,o,h,d=t[4]!=""&&Re(t);function v(y,S){return y[3]>0?Kt:Bt}let p=v(t),m=p(t);return{c(){e=g("div"),n=g("div"),l=g("div"),l.textContent="Код из письма",i=T(),d&&d.c(),f=T(),r=g("input"),s=T(),m.c(),c=me(),a(r,"class",u="code "+(t[4]==""?"":"err")),a(r,"maxlength","4"),a(r,"autocomplete","off"),a(r,"id","code"),a(e,"class","login")},m(y,S){k(y,e,S),_(e,n),_(n,l),_(n,i),d&&d.m(n,null),_(e,f),_(e,r),be(r,t[1]),k(y,s,S),m.m(y,S),k(y,c,S),o||(h=[C(r,"input",t[9]),C(r,"keyup",t[7])],o=!0)},p(y,S){y[4]!=""?d?d.p(y,S):(d=Re(y),d.c(),d.m(n,null)):d&&(d.d(1),d=null),S&16&&u!==(u="code "+(y[4]==""?"":"err"))&&a(r,"class",u),S&2&&r.value!==y[1]&&be(r,y[1]),p===(p=v(y))&&m?m.p(y,S):(m.d(1),m=p(y),m&&(m.c(),m.m(c.parentNode,c)))},d(y){y&&(b(e),b(s),b(c)),d&&d.d(),m.d(y),o=!1,ne(h)}}}function It(t){let e,n,l,i,f,r;return{c(){e=g("form"),n=g("input"),l=T(),i=g("button"),i.textContent="Taris",a(n,"class","email"),a(n,"type","email"),a(n,"name","email"),n.required=!0,a(n,"placeholder","Емеил для входа"),a(n,"title","Емеил для входа"),a(n,"id","email"),a(i,"class","send"),a(e,"class","login")},m(u,s){k(u,e,s),_(e,n),be(n,t[0]),_(e,l),_(e,i),f||(r=[C(n,"input",t[8]),C(e,"submit",pt(t[6]))],f=!0)},p(u,s){s&1&&n.value!==u[0]&&be(n,u[0])},d(u){u&&b(e),f=!1,ne(r)}}}function Re(t){let e,n;return{c(){e=g("div"),n=H(t[4]),a(e,"class","err")},m(l,i){k(l,e,i),_(e,n)},p(l,i){i&16&&U(n,l[4])},d(l){l&&b(e)}}}function Bt(t){let e,n,l,i;return{c(){e=g("div"),n=g("a"),n.textContent="Повторить вход",a(n,"href","/"),a(n,"class","back"),a(e,"class","note")},m(f,r){k(f,e,r),_(e,n),l||(i=C(n,"click",pt(t[10])),l=!0)},p:M,d(f){f&&b(e),l=!1,i()}}}function Kt(t){let e,n,l,i,f;return{c(){e=g("div"),n=H("Повторить отправку через "),l=g("span"),i=H(t[3]),f=H(" сек"),a(l,"class","delay"),a(e,"class","note wait")},m(r,u){k(r,e,u),_(e,n),_(e,l),_(l,i),_(e,f)},p(r,u){u&8&&U(i,r[3])},d(r){r&&b(e)}}}function Ue(t){let e,n=Z(t[5]),l=[];for(let i=0;i<n.length;i+=1)l[i]=Je(Ge(t,n,i));return{c(){e=g("div");for(let i=0;i<l.length;i+=1)l[i].c();a(e,"class","userlist")},m(i,f){k(i,e,f);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(i,f){if(f&32){n=Z(i[5]);let r;for(r=0;r<n.length;r+=1){const u=Ge(i,n,r);l[r]?l[r].p(u,f):(l[r]=Je(u),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(i){i&&b(e),ve(l,i)}}}function Je(t){let e,n=t[12].email+"",l,i,f,r;return{c(){e=g("a"),l=H(n),a(e,"href",i="/"+t[12].start)},m(u,s){k(u,e,s),_(e,l),f||(r=C(e,"click",B),f=!0)},p(u,s){s&32&&n!==(n=u[12].email+"")&&U(l,n),s&32&&i!==(i="/"+u[12].start)&&a(e,"href",i)},d(u){u&&b(e),f=!1,r()}}}function Ft(t){let e,n,l,i,f;function r(o,h){if(o[2]=="email")return It;if(o[2]=="code")return Dt}let u=r(t),s=u&&u(t),c=t[5]&&t[5].length&&Ue(t);return{c(){e=T(),n=g("div"),l=g("div"),i=g("div"),s&&s.c(),f=T(),c&&c.c(),jt.title="Taris.pro",a(i,"class","auth"),a(n,"class","main1")},m(o,h){k(o,e,h),k(o,n,h),_(n,l),_(l,i),s&&s.m(i,null),_(l,f),c&&c.m(l,null)},p(o,[h]){u===(u=r(o))&&s?s.p(o,h):(s&&s.d(1),s=u&&u(o),s&&(s.c(),s.m(i,null))),o[5]&&o[5].length?c?c.p(o,h):(c=Ue(o),c.c(),c.m(l,null)):c&&(c.d(1),c=null)},i:M,o:M,d(o){o&&(b(e),b(n)),s&&s.d(),c&&c.d()}}}function zt(t,e,n){let l;N(t,ge,m=>n(5,l=m));let i="",f="",r="email",u,s="",c=!1;Oe(()=>{document.getElementById("email").focus(),l==!1&&se({userList:1,wait:["userList"]},m=>ge.set(m.userList))});function o(){n(2,r="code"),n(1,f=""),n(4,s=""),n(3,u=60),setTimeout(()=>{document.getElementById("code").focus()},0);let m=setInterval(()=>{n(3,u--,u),!(u>0)&&clearInterval(m)},1e3);se({userGetCode:i},y=>{y.ok!="ok"&&n(4,s="")})}function h(){n(1,f=f.replace(/\D+/g,"")),f.length==4&&c===!1?(c=!0,se({userCheckCode:i,code:f},m=>{if(m.err)return n(4,s=m.err);m.packStart&&(ge.set(m.userList),x.set(m.packStart),je.set(m.isProject),De.set(m.packBc),Ie.set(m.packTree),_e.set(m.packMenu),Be.set(m.packTitle),$e.set(m.lineHtml),pe(m.href))})):f.length<4&&(c=!1,n(4,s=""))}function d(){i=this.value,n(0,i)}function v(){f=this.value,n(1,f)}return[i,f,r,u,s,l,o,h,d,v,()=>n(2,r="email")]}class Vt extends q{constructor(e){super(),V(this,e,zt,Ft,F,{})}}function qt(t){let e;return{c(){e=g("div"),a(e,"id","ace9"),a(e,"class","ace")},m(n,l){k(n,e,l)},p:M,i:M,o:M,d(n){n&&b(e)}}}function Gt(t,e,n){let{value:l=""}=e,i;return Oe(()=>{i=ace.edit("ace9"),i.session.setMode("ace/mode/html"),i.setOptions({minLines:10,fontSize:"14px",fontFamily:"monospace",showPrintMargin:!1,showGutter:!0,useWorker:!1,maxLines:1111,wrap:!0}),i.setValue(l,1),i.on("change",()=>n(0,l=i.getValue())),i.focus();let f=sessionStorage.getItem("gotoLine");i.gotoLine(f||1)}),Nt(()=>{var f=i.getSelectionRange().start.row;sessionStorage.setItem("gotoLine",f+1)}),t.$$set=f=>{"value"in f&&n(0,l=f.value)},[l]}class Rt extends q{constructor(e){super(),V(this,e,Gt,qt,F,{value:0})}}function We(t){let e,n,l;function i(r){t[3](r)}let f={};return t[1]!==void 0&&(f.value=t[1]),e=new Rt({props:f}),de.push(()=>Ce(e,"value",i)),{c(){j(e.$$.fragment)},m(r,u){O(e,r,u),l=!0},p(r,u){const s={};!n&&u&2&&(n=!0,s.value=r[1],Ae(()=>n=!1)),e.$set(s)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){L(e.$$.fragment,r),l=!1},d(r){A(e,r)}}}function Ut(t){let e,n,l,i,f,r,u,s=t[0]&&We(t);return{c(){s&&s.c(),e=T(),n=g("br"),l=T(),i=g("button"),i.textContent="Сохранить",a(i,"id","ctrl-s")},m(c,o){s&&s.m(c,o),k(c,e,o),k(c,n,o),k(c,l,o),k(c,i,o),f=!0,r||(u=C(i,"click",t[2]),r=!0)},p(c,[o]){c[0]?s?(s.p(c,o),o&1&&$(s,1)):(s=We(c),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(Y(),L(s,1,1,()=>{s=null}),Q())},i(c){f||($(s),f=!0)},o(c){L(s),f=!1},d(c){c&&(b(e),b(n),b(l),b(i)),s&&s.d(c),r=!1,u()}}}function Jt(t,e,n){let l,i;N(t,x,u=>n(0,l=u)),N(t,Me,u=>n(1,i=u));function f(){se({pack:l,line:i,wait:["lineHtml"]},u=>{$e.set(u.lineHtml),pe(`/${l}`)})}document.onkeydown=u=>{["KeyS","Enter"].includes(u.code)&&(u.ctrlKey||u.metaKey)&&(u.preventDefault(),f())};function r(u){i=u,Me.set(i)}return[l,i,f,r]}class Wt extends q{constructor(e){super(),V(this,e,Jt,Ut,F,{})}}function Xe(t,e,n){const l=t.slice();return l[4]=e[n],l}function Ye(t){let e,n=t[4].name+"",l,i,f,r,u;return{c(){e=g("a"),l=H(n),a(e,"href",i="/"+t[4].id),a(e,"class",f=t[4]._prj)},m(s,c){k(s,e,c),_(e,l),r||(u=C(e,"click",B),r=!0)},p(s,c){c&1&&n!==(n=s[4].name+"")&&U(l,n),c&1&&i!==(i="/"+s[4].id)&&a(e,"href",i),c&1&&f!==(f=s[4]._prj)&&a(e,"class",f)},d(s){s&&b(e),r=!1,u()}}}function Qe(t){let e,n,l,i=t[4].id&&Ye(t);return{c(){e=g("div"),i&&i.c(),n=T(),a(e,"class",l=t[4]._act+(t[4].id?"":"empty")),Ve(e,"margin-left",t[4].space/2+"ch")},m(f,r){k(f,e,r),i&&i.m(e,null),_(e,n)},p(f,r){f[4].id?i?i.p(f,r):(i=Ye(f),i.c(),i.m(e,n)):i&&(i.d(1),i=null),r&1&&l!==(l=f[4]._act+(f[4].id?"":"empty"))&&a(e,"class",l),r&1&&Ve(e,"margin-left",f[4].space/2+"ch")},d(f){f&&b(e),i&&i.d()}}}function Xt(t){let e,n,l,i,f=Z(t[0]),r=[];for(let u=0;u<f.length;u+=1)r[u]=Qe(Xe(t,f,u));return{c(){e=g("div"),n=g("div");for(let u=0;u<r.length;u+=1)r[u].c();l=T(),i=g("div"),a(n,"class","tree"),a(i,"class","file"),a(e,"class","pro")},m(u,s){k(u,e,s),_(e,n);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(n,null);_(e,l),_(e,i),i.innerHTML=t[1]},p(u,[s]){if(s&1){f=Z(u[0]);let c;for(c=0;c<f.length;c+=1){const o=Xe(u,f,c);r[c]?r[c].p(o,s):(r[c]=Qe(o),r[c].c(),r[c].m(n,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=f.length}s&2&&(i.innerHTML=u[1])},i:M,o:M,d(u){u&&b(e),ve(r,u)}}}function Yt(t,e,n){let l,i,f,r;return N(t,x,u=>n(2,l=u)),N(t,_e,u=>n(3,i=u)),N(t,Ie,u=>n(0,f=u)),N(t,$e,u=>n(1,r=u)),document.onkeydown=u=>{i.line!=null&&["KeyS","Enter"].includes(u.code)&&(u.ctrlKey||u.metaKey)&&(u.preventDefault(),B(`/${l}/line`))},[f,r]}class Qt extends q{constructor(e){super(),V(this,e,Yt,Xt,F,{})}}function Zt(t){let e;return{c(){e=g("div"),a(e,"id","ace9"),a(e,"class","ace")},m(n,l){k(n,e,l)},p:M,i:M,o:M,d(n){n&&b(e)}}}function xt(t,e,n){let{value:l=""}=e;return Oe(()=>{let i=ace.edit("ace9");i.session.setMode("ace/mode/yaml"),i.setOptions({minLines:10,fontSize:"14px",fontFamily:"monospace",showPrintMargin:!1,showGutter:!0,useWorker:!1,maxLines:1111,wrap:!0}),i.setValue(l,1),i.on("change",()=>n(0,l=i.getValue())),i.focus()}),t.$$set=i=>{"value"in i&&n(0,l=i.value)},[l]}class vt extends q{constructor(e){super(),V(this,e,xt,Zt,F,{value:0})}}function Ze(t){let e,n,l;function i(r){t[3](r)}let f={};return t[0]!==void 0&&(f.value=t[0]),e=new vt({props:f}),de.push(()=>Ce(e,"value",i)),{c(){j(e.$$.fragment)},m(r,u){O(e,r,u),l=!0},p(r,u){const s={};!n&&u&1&&(n=!0,s.value=r[0],Ae(()=>n=!1)),e.$set(s)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){L(e.$$.fragment,r),l=!1},d(r){A(e,r)}}}function en(t){let e,n,l,i,f,r,u,s=t[1]&&Ze(t);return{c(){s&&s.c(),e=T(),n=g("br"),l=T(),i=g("button"),i.textContent="Сохранить",a(i,"id","ctrl-s")},m(c,o){s&&s.m(c,o),k(c,e,o),k(c,n,o),k(c,l,o),k(c,i,o),f=!0,r||(u=C(i,"click",t[2]),r=!0)},p(c,[o]){c[1]?s?(s.p(c,o),o&2&&$(s,1)):(s=Ze(c),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(Y(),L(s,1,1,()=>{s=null}),Q())},i(c){f||($(s),f=!0)},o(c){L(s),f=!1},d(c){c&&(b(e),b(n),b(l),b(i)),s&&s.d(c),r=!1,u()}}}function tn(t,e,n){let l,i;N(t,Ne,u=>n(0,l=u)),N(t,x,u=>n(1,i=u));function f(){B(`/${i}`,{tree:l})}document.onkeydown=u=>{["KeyS","Enter"].includes(u.code)&&(u.ctrlKey||u.metaKey)&&(u.preventDefault(),f())};function r(u){l=u,Ne.set(l)}return[l,i,f,r]}class nn extends q{constructor(e){super(),V(this,e,tn,en,F,{})}}function xe(t){let e,n,l;function i(r){t[3](r)}let f={};return t[0]!==void 0&&(f.value=t[0]),e=new vt({props:f}),de.push(()=>Ce(e,"value",i)),{c(){j(e.$$.fragment)},m(r,u){O(e,r,u),l=!0},p(r,u){const s={};!n&&u&1&&(n=!0,s.value=r[0],Ae(()=>n=!1)),e.$set(s)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){L(e.$$.fragment,r),l=!1},d(r){A(e,r)}}}function ln(t){let e,n,l,i,f,r,u,s=t[1]&&xe(t);return{c(){s&&s.c(),e=T(),n=g("br"),l=T(),i=g("button"),i.textContent="Сохранить",a(i,"id","ctrl-s")},m(c,o){s&&s.m(c,o),k(c,e,o),k(c,n,o),k(c,l,o),k(c,i,o),f=!0,r||(u=C(i,"click",t[2]),r=!0)},p(c,[o]){c[1]?s?(s.p(c,o),o&2&&$(s,1)):(s=xe(c),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(Y(),L(s,1,1,()=>{s=null}),Q())},i(c){f||($(s),f=!0)},o(c){L(s),f=!1},d(c){c&&(b(e),b(n),b(l),b(i)),s&&s.d(c),r=!1,u()}}}function rn(t,e,n){let l,i;N(t,Pe,u=>n(0,l=u)),N(t,x,u=>n(1,i=u));function f(){B(`/${i}/access`,{access:l,wait:["accessText"]})}document.onkeydown=u=>{["KeyS","Enter"].includes(u.code)&&(u.ctrlKey||u.metaKey)&&(u.preventDefault(),f())};function r(u){l=u,Pe.set(l)}return[l,i,f,r]}class fn extends q{constructor(e){super(),V(this,e,rn,ln,F,{})}}function et(t,e,n){const l=t.slice();return l[2]=e[n],l}function tt(t){let e,n,l=t[2].created+"",i,f,r,u=t[2].author_email+"",s,c,o,h=t[2].target_name+"",d,v,p,m,y=t[2].up_name+"",S,z,J,G,P;return{c(){e=g("tr"),n=g("td"),i=H(l),f=T(),r=g("td"),s=H(u),c=T(),o=g("td"),d=H(h),v=T(),p=g("td"),m=g("a"),S=H(y),J=T(),a(m,"href",z="/"+t[1]+"/logUp/"+t[2].id)},m(E,R){k(E,e,R),_(e,n),_(n,i),_(e,f),_(e,r),_(r,s),_(e,c),_(e,o),_(o,d),_(e,v),_(e,p),_(p,m),_(m,S),_(e,J),G||(P=C(m,"click",B),G=!0)},p(E,R){R&1&&l!==(l=E[2].created+"")&&U(i,l),R&1&&u!==(u=E[2].author_email+"")&&U(s,u),R&1&&h!==(h=E[2].target_name+"")&&U(d,h),R&1&&y!==(y=E[2].up_name+"")&&U(S,y),R&3&&z!==(z="/"+E[1]+"/logUp/"+E[2].id)&&a(m,"href",z)},d(E){E&&b(e),G=!1,P()}}}function un(t){let e,n=Z(t[0]),l=[];for(let i=0;i<n.length;i+=1)l[i]=tt(et(t,n,i));return{c(){e=g("table");for(let i=0;i<l.length;i+=1)l[i].c();a(e,"class","loglist")},m(i,f){k(i,e,f);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(i,[f]){if(f&3){n=Z(i[0]);let r;for(r=0;r<n.length;r+=1){const u=et(i,n,r);l[r]?l[r].p(u,f):(l[r]=tt(u),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},i:M,o:M,d(i){i&&b(e),ve(l,i)}}}function sn(t,e,n){let l,i;return N(t,kt,f=>n(0,l=f)),N(t,x,f=>n(1,i=f)),[l,i]}class cn extends q{constructor(e){super(),V(this,e,sn,un,F,{})}}function nt(t){let e;function n(f,r){return f[4]==f[0]?an:on}let l=n(t),i=l(t);return{c(){i.c(),e=me()},m(f,r){i.m(f,r),k(f,e,r)},p(f,r){l===(l=n(f))&&i?i.p(f,r):(i.d(1),i=l(f),i&&(i.c(),i.m(e.parentNode,e)))},d(f){f&&b(e),i.d(f)}}}function on(t){let e,n=t[5][t[0]]+"",l,i,f;return{c(){e=g("a"),a(e,"href",t[1]),a(e,"class",l="a "+t[2]),a(e,"title",t[3])},m(r,u){k(r,e,u),e.innerHTML=n,i||(f=C(e,"click",B),i=!0)},p(r,u){u&33&&n!==(n=r[5][r[0]]+"")&&(e.innerHTML=n),u&2&&a(e,"href",r[1]),u&4&&l!==(l="a "+r[2])&&a(e,"class",l),u&8&&a(e,"title",r[3])},d(r){r&&b(e),i=!1,f()}}}function an(t){let e,n=t[5][t[0]]+"",l;return{c(){e=g("span"),a(e,"class",l="a "+t[0]+" "+t[2]),a(e,"title",t[3])},m(i,f){k(i,e,f),e.innerHTML=n},p(i,f){f&33&&n!==(n=i[5][i[0]]+"")&&(e.innerHTML=n),f&5&&l!==(l="a "+i[0]+" "+i[2])&&a(e,"class",l),f&8&&a(e,"title",i[3])},d(i){i&&b(e)}}}function dn(t){let e,n=t[0]in t[5]&&nt(t);return{c(){n&&n.c(),e=me()},m(l,i){n&&n.m(l,i),k(l,e,i)},p(l,[i]){l[0]in l[5]?n?n.p(l,i):(n=nt(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:M,o:M,d(l){l&&b(e),n&&n.d(l)}}}function mn(t,e,n){let l,i,f;N(t,ce,o=>n(6,i=o)),N(t,_e,o=>n(5,f=o));let{key:r}=e,{href:u}=e,{cls:s=""}=e,{title:c=""}=e;return t.$$set=o=>{"key"in o&&n(0,r=o.key),"href"in o&&n(1,u=o.href),"cls"in o&&n(2,s=o.cls),"title"in o&&n(3,c=o.title)},t.$$.update=()=>{t.$$.dirty&64&&n(4,l=i.level[1]||"view")},[r,u,s,c,l,f,i]}class fe extends q{constructor(e){super(),V(this,e,mn,dn,F,{key:0,href:1,cls:2,title:3})}}function lt(t,e,n){const l=t.slice();return l[7]=e[n],l}function it(t){let e,n,l,i,f=t[7].name+"",r,u,s,c,o;return{c(){e=g("i"),l=T(),i=g("a"),r=H(f),a(e,"class",n=t[7]._pub),a(i,"href",u="/"+t[7].id),a(i,"class",s=t[7]._cur)},m(h,d){k(h,e,d),k(h,l,d),k(h,i,d),_(i,r),c||(o=C(i,"click",B),c=!0)},p(h,d){d&1&&n!==(n=h[7]._pub)&&a(e,"class",n),d&1&&f!==(f=h[7].name+"")&&U(r,f),d&1&&u!==(u="/"+h[7].id)&&a(i,"href",u),d&1&&s!==(s=h[7]._cur)&&a(i,"class",s)},d(h){h&&(b(e),b(l),b(i)),c=!1,o()}}}function rt(t){let e,n,l,i,f,r,u,s,c,o,h;n=new fe({props:{key:"view",href:"/"+t[1].level[0]}}),i=new fe({props:{key:"line",href:"/"+t[1].level[0]+"/line"}});let d="tree"in t[5]&&ft(t),v="access"in t[5]&&ct(t);return s=new fe({props:{key:"log",href:"/"+t[1].level[0]+"/log"}}),o=new fe({props:{key:"bye",href:"/bye/"+t[2]}}),{c(){e=g("div"),j(n.$$.fragment),l=T(),j(i.$$.fragment),f=T(),d&&d.c(),r=T(),v&&v.c(),u=T(),j(s.$$.fragment),c=T(),j(o.$$.fragment),a(e,"class","menu")},m(p,m){k(p,e,m),O(n,e,null),_(e,l),O(i,e,null),_(e,f),d&&d.m(e,null),_(e,r),v&&v.m(e,null),_(e,u),O(s,e,null),_(e,c),O(o,e,null),h=!0},p(p,m){const y={};m&2&&(y.href="/"+p[1].level[0]),n.$set(y);const S={};m&2&&(S.href="/"+p[1].level[0]+"/line"),i.$set(S),"tree"in p[5]?d?(d.p(p,m),m&32&&$(d,1)):(d=ft(p),d.c(),$(d,1),d.m(e,r)):d&&(Y(),L(d,1,1,()=>{d=null}),Q()),"access"in p[5]?v?(v.p(p,m),m&32&&$(v,1)):(v=ct(p),v.c(),$(v,1),v.m(e,u)):v&&(Y(),L(v,1,1,()=>{v=null}),Q());const z={};m&2&&(z.href="/"+p[1].level[0]+"/log"),s.$set(z);const J={};m&4&&(J.href="/bye/"+p[2]),o.$set(J)},i(p){h||($(n.$$.fragment,p),$(i.$$.fragment,p),$(d),$(v),$(s.$$.fragment,p),$(o.$$.fragment,p),h=!0)},o(p){L(n.$$.fragment,p),L(i.$$.fragment,p),L(d),L(v),L(s.$$.fragment,p),L(o.$$.fragment,p),h=!1},d(p){p&&b(e),A(n),A(i),d&&d.d(),v&&v.d(),A(s),A(o)}}}function ft(t){let e,n,l,i,f;n=new fe({props:{key:"tree",href:"/"+t[1].level[0]+"/tree"}});let r=t[6]===!1&&ut(t),u=t[6]===!0&&st(t);return{c(){e=g("div"),j(n.$$.fragment),l=T(),r&&r.c(),i=T(),u&&u.c(),a(e,"class","group1")},m(s,c){k(s,e,c),O(n,e,null),_(e,l),r&&r.m(e,null),_(e,i),u&&u.m(e,null),f=!0},p(s,c){const o={};c&2&&(o.href="/"+s[1].level[0]+"/tree"),n.$set(o),s[6]===!1?r?r.p(s,c):(r=ut(s),r.c(),r.m(e,i)):r&&(r.d(1),r=null),s[6]===!0?u?u.p(s,c):(u=st(s),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(s){f||($(n.$$.fragment,s),f=!0)},o(s){L(n.$$.fragment,s),f=!1},d(s){s&&b(e),A(n),r&&r.d(),u&&u.d()}}}function ut(t){let e,n,l,i,f;return{c(){e=g("a"),n=H("+"),a(e,"href",l="/"+t[1].level[0]+"/treeAdd"),a(e,"class","a icon"),a(e,"title","Выделить проект")},m(r,u){k(r,e,u),_(e,n),i||(f=C(e,"click",B),i=!0)},p(r,u){u&2&&l!==(l="/"+r[1].level[0]+"/treeAdd")&&a(e,"href",l)},d(r){r&&b(e),i=!1,f()}}}function st(t){let e,n,l,i,f;return{c(){e=g("a"),n=H("-"),a(e,"href",l="/"+t[1].level[0]+"/treeDel"),a(e,"class","a icon"),a(e,"title","Отменить проект")},m(r,u){k(r,e,u),_(e,n),i||(f=C(e,"click",B),i=!0)},p(r,u){u&2&&l!==(l="/"+r[1].level[0]+"/treeDel")&&a(e,"href",l)},d(r){r&&b(e),i=!1,f()}}}function ct(t){let e,n,l,i,f="&#9741;",r,u,s,c;return n=new fe({props:{key:"access",href:"/"+t[1].level[0]+"/access"}}),{c(){e=g("div"),j(n.$$.fragment),l=T(),i=g("a"),a(i,"href",r="/"+t[1].level[0]+"/accessLink"),a(i,"class","a icon"),a(i,"title","Доступ по ссылке"),a(e,"class","group1")},m(o,h){k(o,e,h),O(n,e,null),_(e,l),_(e,i),i.innerHTML=f,u=!0,s||(c=C(i,"click",B),s=!0)},p(o,h){const d={};h&2&&(d.href="/"+o[1].level[0]+"/access"),n.$set(d),(!u||h&2&&r!==(r="/"+o[1].level[0]+"/accessLink"))&&a(i,"href",r)},i(o){u||($(n.$$.fragment,o),u=!0)},o(o){L(n.$$.fragment,o),u=!1},d(o){o&&b(e),A(n),s=!1,c()}}}function pn(t){let e,n;return e=new cn({}),{c(){j(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function _n(t){let e,n;return e=new fn({}),{c(){j(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function hn(t){let e,n;return e=new nn({}),{c(){j(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function gn(t){let e,n;return e=new Wt({}),{c(){j(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function bn(t){let e,n;return e=new Qt({}),{c(){j(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function kn(t){let e,n,l,i,f,r,u,s,c,o=t[5].name+"",h,d,v,p,m,y,S,z,J;document.title=e=t[4];let G=Z(t[0]),P=[];for(let w=0;w<G.length;w+=1)P[w]=it(lt(t,G,w));let E="view"in t[5]&&rt(t);const R=[bn,gn,hn,_n,pn],ee=[];function Ke(w,I){return w[3]=="view"?0:w[3]=="line"?1:w[3]=="tree"?2:w[3]=="access"?3:w[3]=="log"?4:-1}return~(p=Ke(t))&&(m=ee[p]=R[p](t)),{c(){n=T(),l=g("div"),i=g("div"),f=g("a"),f.textContent="Taris",r=T();for(let w=0;w<P.length;w+=1)P[w].c();u=T(),s=g("div"),c=g("div"),h=H(o),d=T(),E&&E.c(),v=T(),m&&m.c(),y=me(),a(f,"href","/"),a(f,"class","logo"),a(i,"class","bc"),a(c,"class","name"),a(s,"class","burger"),a(l,"class","nav1")},m(w,I){k(w,n,I),k(w,l,I),_(l,i),_(i,f),_(i,r);for(let W=0;W<P.length;W+=1)P[W]&&P[W].m(i,null);_(l,u),_(l,s),_(s,c),_(c,h),_(s,d),E&&E.m(s,null),k(w,v,I),~p&&ee[p].m(w,I),k(w,y,I),S=!0,z||(J=C(f,"click",pe),z=!0)},p(w,[I]){if((!S||I&16)&&e!==(e=w[4])&&(document.title=e),I&1){G=Z(w[0]);let K;for(K=0;K<G.length;K+=1){const Fe=lt(w,G,K);P[K]?P[K].p(Fe,I):(P[K]=it(Fe),P[K].c(),P[K].m(i,null))}for(;K<P.length;K+=1)P[K].d(1);P.length=G.length}(!S||I&32)&&o!==(o=w[5].name+"")&&U(h,o),"view"in w[5]?E?(E.p(w,I),I&32&&$(E,1)):(E=rt(w),E.c(),$(E,1),E.m(s,null)):E&&(Y(),L(E,1,1,()=>{E=null}),Q());let W=p;p=Ke(w),p!==W&&(m&&(Y(),L(ee[W],1,1,()=>{ee[W]=null}),Q()),~p?(m=ee[p],m||(m=ee[p]=R[p](w),m.c()),$(m,1),m.m(y.parentNode,y)):m=null)},i(w){S||($(E),$(m),S=!0)},o(w){L(E),L(m),S=!1},d(w){w&&(b(n),b(l),b(v),b(y)),ve(P,w),E&&E.d(),~p&&ee[p].d(w),z=!1,J()}}}function vn(t,e,n){let l,i,f,r,u,s,c;return N(t,De,o=>n(0,f=o)),N(t,ce,o=>n(1,r=o)),N(t,Be,o=>n(4,u=o)),N(t,_e,o=>n(5,s=o)),N(t,je,o=>n(6,c=o)),t.$$.update=()=>{t.$$.dirty&2&&n(3,l=r.level[1]||"view"),t.$$.dirty&1&&n(2,i=f[0]?f[0].name:"")},[f,r,i,l,u,s,c]}class $n extends q{constructor(e){super(),V(this,e,vn,kn,F,{})}}function wn(t){let e,n;return e=new $n({}),{c(){j(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function yn(t){let e,n;return e=new Vt({}),{c(){j(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Tn(t){let e,n=t[0]!=""?`<pre class="apierr">${t[0]}</pre>`:"",l,i,f,r,u,s;const c=[yn,wn],o=[];function h(d,v){return v&2&&(i=null),d[1].path=="/"?0:(i==null&&(i=Number(d[1].level[0])>0),i?1:-1)}return~(f=h(t,-1))&&(r=o[f]=c[f](t)),{c(){e=new St(!1),l=T(),r&&r.c(),u=me(),e.a=l},m(d,v){e.m(n,d,v),k(d,l,v),~f&&o[f].m(d,v),k(d,u,v),s=!0},p(d,[v]){(!s||v&1)&&n!==(n=d[0]!=""?`<pre class="apierr">${d[0]}</pre>`:"")&&e.p(n);let p=f;f=h(d,v),f!==p&&(r&&(Y(),L(o[p],1,1,()=>{o[p]=null}),Q()),~f?(r=o[f],r||(r=o[f]=c[f](d),r.c()),$(r,1),r.m(u.parentNode,u)):r=null)},i(d){s||($(r),s=!0)},o(d){L(r),s=!1},d(d){d&&(e.d(),b(l),b(u)),~f&&o[f].d(d)}}}function Ln(t,e,n){let l,i;return N(t,ke,f=>n(0,l=f)),N(t,ce,f=>n(1,i=f)),[l,i]}class En extends q{constructor(e){super(),V(this,e,Ln,Tn,F,{})}}new En({target:document.getElementById("app")});
